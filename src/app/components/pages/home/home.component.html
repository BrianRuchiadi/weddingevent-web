<app-header></app-header>

<div class="container">
    <table>
        <thead>
            <tr>
                <th>Play</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let stage of stageInfo" class="full" [ngClass]="{
                'disabled':stage.unlocked === false
            }" (click)="play(stage.stage_no)">
                <td>
                    <i class="fa fa-lock" aria-hidden="true" *ngIf="!stage.unlocked"></i> Stage {{stage.stage_no}}
                    <br/>
                    <span class="exp-needed" *ngIf="!stage.unlocked">* Exp needed : {{ stage.exp_needed }}</span>
                </td>
            </tr>
        </tbody>
    </table>
    <table>
        <thead>
            <tr>
                <th colspan="5">
                    Attack Power
                </th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="text-center" *ngIf="userInfo"><i class="fa fa-money" aria-hidden="true"></i> {{ userInfo.cash }}</td>
                <td>
                    <span class="left">0</span>
                    <span class="right">50</span>
                </td>
                <td>Pwr</td>
                <td></td>
                <td>Cost</td>
            </tr>
            <tr>
                <td>Multiplication</td>
                <td class="attack-bar">
                    <span class="current-bar" id="multiplication"></span>
                </td>
                <td *ngIf="userInfo">{{ userInfo.power_multiplication }}</td>
                <td width="30">
                    <span class="upgrade" [ngClass]="{
                        'disabled':userInfo.power_multiplication_eligibility === false
                    }" *ngIf="userInfo" (click)="upgradeAttackPower('multiplication')">
                    <i class="fa fa-plus"></i>
                    </span>
                </td>
                <td *ngIf="userInfo">$ {{ userInfo.cost_power_multiplication }}</td>
            </tr>
            <tr>
                <td>Division</td>
                <td class="attack-bar">
                    <span class="current-bar" id="division"></span>
                </td>
                <td *ngIf="userInfo">{{ userInfo.power_division }}</td>
                <td width="30">
                    <span class="upgrade" [ngClass]="{
                        'disabled':userInfo.power_division_eligibility === false
                    }" *ngIf="userInfo" (click)="upgradeAttackPower('division')">
                    <i class="fa fa-plus"></i>
                    </span>
                </td>
                <td *ngIf="userInfo">$ {{ userInfo.cost_power_division }}</td>
            </tr>
            <tr>
                <td>Addition</td>
                <td class="attack-bar">
                    <span class="current-bar" id="addition"></span>
                </td>
                <td *ngIf="userInfo">{{ userInfo.power_addition }}</td>
                <td width="30">
                    <span class="upgrade" [ngClass]="{
                        'disabled':userInfo.power_addition_eligibility === false
                    }" *ngIf="userInfo" (click)="upgradeAttackPower('addition')">
                    <i class="fa fa-plus"></i>
                    </span>
                </td>
                <td *ngIf="userInfo">$ {{ userInfo.cost_power_addition }}</td>
            </tr>
            <tr>
                <td>Subtraction</td>
                <td class="attack-bar">
                    <span class="current-bar" id="subtraction"></span>
                </td>
                <td *ngIf="userInfo">{{ userInfo.power_subtraction }}</td>
                <td width="30">
                    <span class="upgrade" [ngClass]="{
                        'disabled':userInfo.power_subtraction_eligibility === false
                    }" *ngIf="userInfo" (click)="upgradeAttackPower('subtraction')">
                    <i class="fa fa-plus"></i>
                    </span>
                </td>
                <td *ngIf="userInfo">$ {{ userInfo.cost_power_subtraction }}</td>
            </tr>
            <tr *ngIf="userInfo">
                <td></td>
                <td class="upgrade-confirm" *ngIf="userInfo.is_upgrade" (click)="confirmUpgradeAttackPower()">
                    Upgrade
                </td>
                <td colspan="3"></td>
            </tr>
        </tbody>
    </table>

    <table>
        <thead>
            <tr>
                <th colspan="3">
                    Player Report
                </th>
            </tr>
        </thead>
        <tbody *ngIf="userInfo">
            <tr>
                <td class="text-center"><i class="fa fa-money" aria-hidden="true"></i> {{ userInfo.cash }}</td>
                <td colspan="2">
                </td>
            </tr>
            <tr>
                <td rowspan="5" class="text-center">
                    <img src="/assets/avatars/{{ userInfo.avatar_id }}/face-down.png">
                </td>
            </tr>
            <tr>
                <td>Level :</td>
                <td>{{ userInfo.level }}</td>
            </tr>
            <tr>
                <td>Battle Won :</td>
                <td>{{ userInfo.battle_won }}</td>
            </tr>
            <tr>
                <td>Exp :</td>
                <td>{{ userInfo.exp_accumulated | number:'1.0-0' }}</td>
            </tr>
            <tr>
                <td>Pokedex Completion :</td>
                <td>{{ userInfo.pokedex_completion }}</td>
            </tr>
            <tr>
                <td class="text-center">{{ userInfo.username }}</td>
                <td colspan="2"></td>
            </tr>
        </tbody>
    </table>
</div>